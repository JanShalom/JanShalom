Connect-AzAccount
$tid = (Get-AzTenant).Id
azcopy login $tid
git clone https://github.com/JanShalom/JanShalom.git
.\create-100-blobs.ps1

#list all storage account names
$RG= read-Host -Prompt 'Please Enter the Resource Group Name '
Get-AzStorageaccount -r $RG |select StorageAccountName

# set the storage account the blobs will be uploaded to
$StorageA= read-Host -Prompt 'Please Enter the Storage A name '

# get Storage account key
$storageAccountKey = (Get-AzStorageAccountKey -ResourceGroupName $RG -Name $StorageA).Value[0]

# set storageA context
$ctx=New-AzureStorageContext -StorageAccountName $StorageA -StorageAccountKey $storageAccountKey

New-AzureStorageContainer -Name "files" -Permission Blob -Context $ctx

#obtain Storage A Uri.AbsoluteUri

$bloburi = (Get-AzStorageAccount -ResourceGroupName $RG -Name $StorageA|select PrimaryEndpoints).PrimaryEndpoints.Web

#Generate storage SAS key
$saskey = New-AzStorageAccountSASToken -Context $ctx -Service Blob,File,Table,Queue -ResourceType Service,Container,Object -Permission racwdlup

# make ms-challenge container
# StorageA uri = $bloburi
azcopy make https://[storagAuri].blob.core.windows.net/ms-challenge

# copy Blobs from local PC to storageA
azcopy copy  "[Local path]\*" https://[storagAuri].blob.core.windows.net/ms-challenge/ --recursive
